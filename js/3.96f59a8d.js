(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"40f0":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{attrs:{padding:""}},[n("LogTerminal",{attrs:{hideLog:e.hideLog,uuid:e.currentUUID,dialog:e.dialog,"maximized-toggle":e.maximizedToggle}}),n("q-table",{attrs:{loading:e.loading,grid:"",title:"Devices table",data:e.devices,columns:e.columns,"row-key":"device_name",selected:e.selected,pagination:e.pagination},on:{"update:selected":function(t){e.selected=t},"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"item",fn:function(t){return[n("q-card",{staticClass:"col-xl-3 col-md-4 col-sm-12 col-xs-12"},[n("q-list",{attrs:{dense:""}},e._l(t.cols,(function(i){return n("q-item",{key:i.name},[n("q-item-section",[n("q-item-label",[e._v(e._s(i.label))])],1),n("q-item-section",{attrs:{side:""}},["is_online"==i.name?n("q-item-label",[t.row.is_online?n("Dot",{attrs:{color:"green"}}):n("Dot",{attrs:{color:"red"}}),e._v("\n                /\n                "),t.row.is_connected_to_vpn?n("Dot",{attrs:{color:"green"}}):n("Dot",{attrs:{color:"red"}})],1):"device_name"==i.name?n("q-item-label",[e._v("\n                "+e._s(i.value)+"\n                "),n("q-popup-edit",{attrs:{buttons:"",title:e.$t("editname")},on:{save:function(n){return e.saveDeviceName(t)}},model:{value:t.row.device_name,callback:function(n){e.$set(t.row,"device_name",n)},expression:"props.row.device_name"}},[n("q-input",{attrs:{dense:"",autofocus:"",counter:""},model:{value:t.row.device_name,callback:function(n){e.$set(t.row,"device_name",n)},expression:"props.row.device_name"}})],1)],1):"note"==i.name?n("q-item-label",[null!==t.row.note?n("span",[e._v(" "+e._s(i.value))]):n("span",[e._v(e._s(e.$t("nonote")))]),n("q-popup-edit",{attrs:{buttons:"",title:e.$t("editname")},on:{save:function(n){return e.saveNote(t)}},model:{value:t.row.note,callback:function(n){e.$set(t.row,"note",n)},expression:"props.row.note"}},[n("q-input",{attrs:{dense:"",autofocus:"",counter:""},model:{value:t.row.note,callback:function(n){e.$set(t.row,"note",n)},expression:"props.row.note"}})],1)],1):n("q-item-label",[e._v(e._s(i.value))])],1)],1)})),1),n("q-separator"),n("q-card-section",[n("q-btn",{on:{click:function(n){return e.showLog(t.row.uuid)}}},[e._v(e._s(e.$t("logs")))]),t.row.is_online?n("q-btn",{on:{click:function(n){return e.reboot(t)}}},[e._v(e._s(e.$t("reboot"))+"\n          ")]):e._e(),t.row.is_online?n("q-btn",{on:{click:function(n){return e.restart(t)}}},[e._v(e._s(e.$t("restart"))+"\n          ")]):e._e(),n("q-btn",{attrs:{to:"/deviceenvs/"+e.$route.params.id+"/"+t.row.uuid}},[e._v(e._s(e.$t("editDeviceEnv"))+"\n          ")])],1),n("q-separator"),e.$store.state.main.tunnelerUrl?n("q-card-section",[n("q-toggle",{staticStyle:{width:"200px"},attrs:{color:"green",label:e.$t("exposedssh"),"checked-icon":"check","unchecked-icon":"clear",disable:e.deviceLoadingState[t.row.uuid]},on:{input:function(n){return e.ssh(t)}},model:{value:t.row.sshExposed,callback:function(n){e.$set(t.row,"sshExposed",n)},expression:"props.row.sshExposed"}}),t.row.sshExposed?n("q-btn",{staticStyle:{"margin-left":"10px"},attrs:{disable:e.deviceLoadingState[t.row.uuid],color:"secondary"},on:{click:function(n){return e.openDomain(t.row.sshDetails)}}},[e._v("\n            "+e._s(e.$t("open"))+"\n          ")]):e._e()],1):e._e(),e.$store.state.main.tunnelerUrl?n("q-card-section",[n("q-toggle",{staticStyle:{width:"200px"},attrs:{color:"green",label:e.$t("exposed80"),"checked-icon":"check","unchecked-icon":"clear",disable:e.deviceLoadingState[t.row.uuid]},on:{input:function(n){return e.expose(t)}},model:{value:t.row.exposed,callback:function(n){e.$set(t.row,"exposed",n)},expression:"props.row.exposed"}}),t.row.exposed?n("q-btn",{staticStyle:{"margin-left":"10px"},attrs:{disable:e.deviceLoadingState[t.row.uuid],color:"secondary"},on:{click:function(n){return e.openDomain(t.row.exposedDetails)}}},[e._v(e._s(e.$t("open"))+"\n          ")]):e._e()],1):e._e(),e.$store.state.main.tunnelerUrl&&e.$store.state.main.SSLSuffix?n("q-card-section",[n("q-toggle",{staticStyle:{width:"200px"},attrs:{color:"green",label:e.$t("exposedSSL"),"checked-icon":"check","unchecked-icon":"clear",disable:e.deviceLoadingState[t.row.uuid]},on:{input:function(n){return e.exposeSSL(t)}},model:{value:t.row.exposedSSL,callback:function(n){e.$set(t.row,"exposedSSL",n)},expression:"props.row.exposedSSL"}}),t.row.exposedSSL?n("q-btn",{staticStyle:{"margin-left":"10px"},attrs:{disable:e.deviceLoadingState[t.row.uuid],color:"secondary"},on:{click:function(n){return e.openDomain(t.row.exposedDetails)}}},[e._v(e._s(e.$t("open"))+"\n          ")]):e._e()],1):e._e(),n("q-separator")],1)]}}])})],1)},o=[],r=(n("a434"),n("d3b7"),n("e6cf"),n("96cf"),n("c973")),s=n.n(r),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"dot",style:"background-color: "+e.color})},a=[],c={props:{color:{type:String}}},M=c,l=(n("d0db"),n("2877")),d=Object(l["a"])(M,u,a,!1,null,"02bb3690",null),g=d.exports,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-dialog",{attrs:{"full-height":"","full-width":"",persistent:""},on:{"!keydown":function(t){return(t.type.indexOf("key")||90===t.keyCode)&&t.ctrlKey?(t.preventDefault(),t.stopPropagation(),e.hideLog(t)):null}},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("q-card",{staticClass:"bg-black"},[n("q-bar",[n("q-space"),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",color:"white",icon:"close"},on:{click:e.hideLog}},[n("q-tooltip",[e._v("Close")])],1)],1),n("shell",{attrs:{banner:e.banner,shell_input:e.send_to_terminal},on:{shell_output:e.prompt}})],1)],1)},j=[],N=(n("caad"),n("2532"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{on:{"!keydown":function(t){return(t.type.indexOf("key")||67===t.keyCode)&&t.ctrlKey?(t.preventDefault(),t.stopPropagation(),e.cmd_enter("^C")):null},click:function(t){return e.$refs.cmd.focus()}}},[n("div",{ref:"terminal",attrs:{id:"container"}},[e.banner?n("div",{attrs:{id:"banner"}},[n("p",[e.banner.img?n("img",{attrs:{align:e.banner.img.align?e.banner.img.align:"left",src:e.banner.img.link?e.banner.img.link:"@/logo.png",width:e.banner.img.width?e.banner.img.width:"100px",height:e.banner.img.height?e.banner.img.height:"100px"}}):e._e()]),e.banner.header?n("h2",{staticStyle:{"letter-spacing":"4px"}},[e._v(e._s(e.banner.header))]):e._e(),e.banner.subHeader?n("p",[e._v(e._s(e.banner.subHeader))]):e._e(),e.banner.helpHeader?n("p",[e._v(e._s(e.banner.helpHeader))]):e._e(),n("p")]):e._e(),n("output",{ref:"output"}),n("div",{staticClass:"input-line",attrs:{id:"input-line"}},[n("div",{staticClass:"prompt"},[e.banner.emoji.first&&e.showemoji?n("div",[e._v("("+e._s(e.banner.emoji.first)+")")]):e._e(),e.banner.emoji.second&&!e.showemoji?n("div",[e._v("("+e._s(e.banner.emoji.second)+")")]):e._e(),n("div",[e._v(e._s(e.banner.sign?e.banner.sign:">>"))])]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"cmd",staticClass:"cmdline",attrs:{autofocus:""},domProps:{value:e.value},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.cmd_enter(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.history_up()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.history_down()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.cmd_tab(t)}],input:function(t){t.target.composing||(e.value=t.target.value)}}})])])])}),D=[],h=(n("4de4"),n("4160"),n("a15b"),n("b0c0"),n("ac1f"),n("1276"),n("498a"),n("159b"),{props:{shell_input:{required:!1},banner:{type:Object,required:!1,default:function(){return{header:"Vue Shell",subHeader:"Shell is power just enjoy ðŸ”¥",helpHeader:'Enter "help" for more information.',emoji:{first:"ðŸ”…",second:"ðŸ”†",time:750},sign:"VueShell $",img:{align:"left",link:"@/logo.png",width:100,height:100}}}},commands:{type:Array}},data:function(){return{showemoji:!0,value:"",history_:[],histpos_:0,histtemp_:0}},computed:{allcommands:function(){var e=["help","clear","list","logs"];return this.commands&&this.commands.forEach((function(t){e.push(t.name)})),e}},watch:{shell_input:function(e){this.output(e),this.$parent.send_to_terminal=""}},methods:{history_up:function(){this.history_.length&&(this.history_[this.histpos_]?this.history_[this.histpos_]=this.value:this.histtemp_=this.value),this.histpos_--,this.histpos_<0&&(this.histpos_=0),this.value=this.history_[this.histpos_]?this.history_[this.histpos_]:this.histtemp_},history_down:function(){this.history_.length&&(this.history_[this.histpos_]?this.history_[this.histpos_]=this.value:this.histtemp_=this.value),this.histpos_++,this.histpos_>this.history_.length&&(this.histpos_=this.history_.length),this.value=this.history_[this.histpos_]?this.history_[this.histpos_]:this.histtemp_},cmd_tab:function(e){e.preventDefault()},cmd_enter:function(){var e=this;this.value&&(this.history_[this.history_.length]=this.value,this.histpos_=this.history_.length);var t=this.$refs.cmd.parentNode.cloneNode(!0);t.removeAttribute("id"),t.classList.add("line");var n=t.querySelector("input.cmdline");n.autofocus=!1,n.readOnly=!0;var i=this.$refs.output.appendChild(t);if(i.scrollIntoView(),this.value&&this.value.trim()){var o=this.value.split(" ").filter((function(e){return e})),r=o[0].toLowerCase();o=o.splice(1)}"clear"===r?(this.$refs.output.innerHTML="",this.value=""):"help"===r?this.output('<div class="ls-files">'+this.allcommands.join("<br>")+"</div><br> Use <b>list</b> command with -a flag to get full info about services at device<br> Use <b>logs</b> command to see all logs from device<br><br> <b>-s</b> service_name: get logs from specified service<br> <b>--tail</b> get specified amount of messages:<br> Use <b>CTRL + C</b> for focus on input, and <b>CTRL + Z</b> for exit from terminal"):(this.commands&&this.commands.forEach((function(t){r===t.name&&e.output(t.get())})),""!==this.value.trim()&&this.$emit("shell_output",this.value),this.value="")},output:function(e){this.$refs.output.insertAdjacentHTML("beforeEnd","<p>"+e+"</p>"),this.value=""}},mounted:function(){var e=this;this.banner.emoji.first&&this.banner.emoji.second&&this.banner.emoji.time&&setInterval((function(){e.showemoji=!e.showemoji}),this.banner.emoji.time)}}),m=h,y=(n("6ecd"),Object(l["a"])(m,N,D,!1,null,"576461d9",null)),p=y.exports,I=(n("99af"),n("c975"),n("d81d"),n("fb6a"),n("b64b"),n("970b")),f=n.n(I),A=n("5bc3"),S=n.n(A),x=n("6ebd"),T=n.n(x),z=n("18b2"),w=n.n(z),v=function(){function e(t,n){f()(this,e),this.commands=["list","logs"],this.uuid=t,this.sdk=n,this.colors=["#d50e3b","#e501b4","#15db07","#dcdc30","#00B3E6","#e3b645","#3366E6","#999966","#99FF99","#B34D4D","#80B300","#809900","#E6B3B3","#6680B3","#66991A","#FF99E6","#CCFF1A","#FF1A66","#E6331A","#33FFCC","#66994D","#B366CC","#4D8000","#B33300","#CC80CC","#66664D","#991AFF","#E666FF","#4DB3FF","#1AB399","#E666B3","#33991A","#CC9999","#B3B31A","#00E680","#4D8066","#809980","#E6FF80","#1AFF33","#999933","#FF3380","#CCCC00","#66E64D","#4D80CC","#9900B3","#E64D66","#4DB380","#FF4D4D","#32dede","#6666FF"]}return S()(e,[{key:"commandExists",value:function(e){return this.commands.includes(e)||this.commands.filter((function(t){return e.includes(t)})).length>0}},{key:"processCommand",value:function(e){var t=T()(e.split(" "));return console.log(t),e.includes("list")?t.a?this.getFullServicesForDevice():this.getServicesForDevice():t._.includes("logs")?t.s?t.tail?this.getLogsByService(t.s).then((function(e){return e.slice(-t.tail)})).then((function(e){return e.join("<br>")})):this.getLogsByService(t.s).then((function(e){return e.join("<br>")})):t._.length<2?t.tail?this.getAllLogs().then((function(e){return e.slice(-t.tail)})).then((function(e){return e.join("<br>")})):this.getAllLogs().then((function(e){return e.join("<br>")})):new Promise("Wrong format of 'logs' command. Try 'logs' or 'logs -s service name'"):new Promise("'".concat(e,"' is not recognized as an internal command or external"))}},{key:"getAllLogs",value:function(){var e=this;return this.sdk.logs.history(this.uuid).then((function(t){return e.getServicesAndFormatMessages(t)}))}},{key:"getServicesAndFormatMessages",value:function(e){var t=this;return this.getServicesMap().then((function(n){return t.formatMessages(e,n)}))}},{key:"getServicesMap",value:function(){return this.sdk.models.device.getWithServiceDetails(this.uuid).then((function(e){var t={};return Object.keys(e.current_services).forEach((function(n){var i=e.current_services[n].filter((function(e){return e.status.includes("Running")}))[0];t[i.service_id]=n})),t}))}},{key:"formatMessages",value:function(e,t){var n=this;return e.map((function(e){return n.formatSingleMessage(t,e)}))}},{key:"formatSingleMessage",value:function(e,t){return t.isSystem?'<b style="color: white;">[SYSTEM]</b> ['.concat(this.formatDate(t.createdAt),"] ").concat(t.message):t.isStdErr?'<b style="color: red;">[ERROR]</b> <span style="color: red"> ['.concat(this.formatDate(t.createdAt),"] ").concat(t.message,"</span>"):'<b style="color: '.concat(this.colors[Object.keys(e).indexOf(""+t.serviceId)],';">[').concat(e[t.serviceId],"]</b> [").concat(this.formatDate(t.createdAt),"] ").concat(t.message)}},{key:"formatMessageAsPromise",value:function(e){var t=this;return this.getServicesMap().then((function(n){return t.formatSingleMessage(n,e)}))}},{key:"getLogsByService",value:function(e){var t=this;return this.sdk.logs.history(this.uuid).then((function(n){return t.getServicesMap().then((function(i){return n.filter((function(t){return console.log(i),!t.isSystem&&!t.isStdErr&&i[t.serviceId]===e})).map((function(e){return'<b style="color: '.concat(t.colors[Object.keys(i).indexOf(""+e.serviceId)],';">[').concat(i[e.serviceId],"]</b> [").concat(t.formatDate(e.createdAt),"] ").concat(e.message)}))})).then((function(e){return e.length>0?e:"No messages from this service in last 1000 lines"}))}))}},{key:"formatDate",value:function(e){return new Date(e).toLocaleString()}},{key:"showHistory",value:function(){var e=this.uuid;return this.sdk.logs.history(e).then((function(e){return e.map((function(e){return e}))}))}},{key:"getServicesForDevice",value:function(){return this.sdk.models.device.getWithServiceDetails(this.uuid).then((function(e){return console.log(e),Object.keys(e.current_services).join("<br>")}))}},{key:"getFullServicesForDevice",value:function(){return this.sdk.models.device.getWithServiceDetails(this.uuid).then((function(e){return console.log(e),w()(Object.keys(e.current_services).map((function(t){var n=e.current_services[t].filter((function(e){return e.status.includes("Running")}))[0];return{id:n.service_id,name:" | ".concat(t),status:'<div class="bg-green">'.concat(n.status,"<div>"),"install date":'<div class="text-right">'.concat(new Date(n.install_date).toLocaleDateString(),"</div>")}})))}))}},{key:"formatText",value:function(e){return"<p>".concat(e,"</p>")}}]),e}(),C=v,E={name:"LogTerminal",components:{shell:p},props:{dialog:{},maximizedToggle:{},hideLog:{},uuid:{}},watch:{uuid:function(e,t){this.terminalUtil=new C(e,this.$store.state.main.sdk)}},mounted:function(){this.terminalUtil=new C(this.uuid,this.$store.state.main.sdk),this.getServicesForDevice(this.uuid)},methods:{detach:function(){var e=this;this.send_to_terminal="^C",setTimeout((function(){e.send_to_terminal=""}),300)},prompt:function(e){var t=this;if(this.terminalUtil.commandExists(e)){if(this.send_to_terminal="",e.includes("-f")&&e.includes("logs"))return void this.subscribeToLogs(this.uuid);this.terminalUtil.processCommand(e,this.uuid,this.send_to_terminal).then((function(e){t.send_to_terminal=e}))}else this.send_to_terminal="",this.send_to_terminal="'".concat(e,"' is not recognized as an internal command or external")},subscribeToLogs:function(e){var t=this;this.terminalUtil.processCommand("logs --tail 100",this.uuid,this.send_to_terminal).then((function(e){t.send_to_terminal=e})),this.$store.state.main.sdk.logs.subscribe(e).then((function(e){e.on("line",(function(e){console.log(e),t.terminalUtil.formatMessageAsPromise(e).then((function(e){t.send_to_terminal+="<br>".concat(e)}))}))}))}},data:function(){return{terminalUtil:void 0,services:[],currLogs:"",history:"",send_to_terminal:"",banner:{header:"",subHeader:"Shell for logs from devices",helpHeader:'Enter "help" for more information',emoji:{first:"",second:"",time:750},sign:"open-balena $",img:{align:"left",link:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMjgiIGhlaWdodD0iNDIiIHZpZXdCb3g9IjAgMCAyMjggNDIiPgogICAgPGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBmaWxsPSIjMDBEMkVBIiBkPSJNNTcuMjMxIDIzLjA4NmMwIDIuMTg2IDEuNjY3IDMuOCAzLjYzNSAzLjggMS45NjggMCAzLjYzNS0xLjYxNCAzLjYzNS0zLjgyOCAwLTIuMjEzLTEuNjY3LTMuODI2LTMuNjM1LTMuODI2LTEuOTY4IDAtMy42MzUgMS42MTMtMy42MzUgMy44MjZ2LjAyOHptLTQuNTM3LS4wNTVjMC0zLjY5IDIuNjUxLTguMDM1IDguMTcyLTguMDM1IDUuNTIxIDAgOC4xNzIgNC4zNDYgOC4xNzIgOC4wNjIgMCAzLjcxOC0yLjY1IDguMDYzLTguMTcyIDguMDYzLTUuNTIgMC04LjE3Mi00LjM0NS04LjE3Mi04LjA2M3YtLjAyN3pNODMuNTUgMjMuMDU5YzAtMS43NzYtMS4zMTItMy44NTQtMy44LTMuODU0LTEuMDkzIDAtMi4wNS40MzctMi43MzIgMS4xNDgtLjY1Ny42ODQtMS4wNjcgMS42NjctMS4wNjcgMi43NiAwIDEuMDY3LjQxIDIuMDIzIDEuMDk0IDIuNzA2YTMuODIgMy44MiAwIDAgMCAyLjcwNiAxLjEyYzIuMzc4IDAgMy43OTktMS45NCAzLjc5OS0zLjg1M3YtLjAyN3ptLTExLjk0NC03LjU3aDQuMjY0djEuNjY2Yy45ODQtMS4xNDcgMi40ODctMi4xODYgNC44MS0yLjE4NiA1LjM4NCAwIDcuNDA3IDQuNzI4IDcuNDA3IDguMjUzIDAgNC4zNzQtMy4wNjEgNy45NTQtNy4zOCA3Ljk1NC0yLjczMyAwLTQuMDE4LTEuMzEyLTQuNTY0LTEuODg2djYuNDI0aC00LjUzN1YxNS40ODh6TTEwMS4yMDQgMjEuMmMtLjExLS43MS0xLjAzOC0yLjQwNS0zLjM4OS0yLjQwNS0yLjM1IDAtMy4yOCAxLjY5NS0zLjM4OSAyLjQwNWg2Ljc3OHptLTYuODMzIDMuNDQ0Yy4xOTEgMS42MTIgMS43MjIgMi42NzggMy40OTkgMi42NzggMS40NDggMCAyLjIxNC0uNjI4IDIuNzYtMS40Mmg0LjY0N2MtLjczOCAxLjY5NC0xLjgwNCAzLjAwNi0zLjA4OCAzLjg4YTcuMzczIDcuMzczIDAgMCAxLTQuMzIgMS4zNjdjLTQuMzQ0IDAtOC4wMzUtMy41MjYtOC4wMzUtOC4wMzYgMC00LjIzNiAzLjMzNS04LjE0NCA3Ljk1NC04LjE0NCAyLjMyMyAwIDQuMzE4LjkwMiA1Ljc0IDIuNDA1IDEuOTEzIDIuMDUgMi40ODcgNC40ODIgMi4xMzEgNy4yN0g5NC4zNzF6TTEwOC4zMSAxNS40ODhoNC4yMzV2MS42MTNjLjUyLS43MzggMS40NzYtMi4xMzIgNC4xODItMi4xMzIgNS4xMTEgMCA1LjYzIDQuMTU0IDUuNjMgNi4yMDR2OS40ODRoLTQuNTM3di04LjI4MmMwLTEuNjY3LS4zNTUtMy4xNDMtMi4zNzctMy4xNDMtMi4yNDEgMC0yLjU5NyAxLjYxMy0yLjU5NyAzLjE3djguMjU1aC00LjUzN1YxNS40ODh6TTMzLjg1IDE1LjE3NHYxMS41ODNjMCAxLjcwNC0uOTE4IDMuMjktMi4zOTUgNC4xMzlsLTEwLjEgNS44MDdjLS4yNy4xNTUtLjU1LjI3Ny0uODM5LjM3MnY0LjYzNmMuNDktLjEyOC45Ni0uMzEyIDEuMzk2LS41NjRsMTMuMTE3LTcuNTQyYTUuOTIgNS45MiAwIDAgMCAyLjk2Mi01LjExOFYxMy40NDRjMC0uNTEyLS4wNzctMS4wMTctLjIxMy0xLjUxM2wtNC4wMTUgMi4zODJjLjA1NC4yODEuMDg3LjU2OC4wODcuODZNMi45NTUgOC4zMjNjLS41MTUuMjk3LS45OC42ODItMS4zODUgMS4xMjhsMy45ODYgMi4zNjVjLjI5LS4yOTguNjA1LS41Ny45NzQtLjc4M0wxNi41OSA1LjIzYTQuNzkgNC43OSAwIDAgMSA0Ljc2Ni0uMDAzbDEwLjEgNS44MDhjLjMwMy4xNzQuNTczLjM4OC44MjMuNjIxbDMuOTY3LTIuMzUzYy0uMzY4LS4zNzctLjc2NC0uNzE3LTEuMjE2LS45NzhMMjEuOTEzLjc4M2E1LjkyNyA1LjkyNyAwIDAgMC01Ljg5NS4wMDRMMi45NTUgOC4zMjN6TTE2LjU4OCAzNi43TDYuNTMgMzAuODk4YTQuNzg3IDQuNzg3IDAgMCAxLTIuMzktNC4xMzZWMTUuMTdjMC0uMjEuMDI3LS40MTcuMDU2LS42MjNMLjE2MyAxMi4xNTRBNS43MiA1LjcyIDAgMCAwIDAgMTMuNDM3djE1LjA1NmE1LjkxOCA1LjkxOCAwIDAgMCAyLjk1NSA1LjExNGwxMy4wNjMgNy41MzdjLjQ1NC4yNjIuOTQzLjQ1MiAxLjQ1Ni41ODJ2LTQuNjQzYTQuNTE3IDQuNTE3IDAgMCAxLS44ODYtLjM4MiIvPgogICAgICAgIDxnIGZpbGw9IiMyQTUwNkYiPgogICAgICAgICAgICA8cGF0aCBkPSJNMTMyLjIxOSAyMC4yODZjLS45OTUuODA0LTEuNDkyIDEuODMtMS40OTIgMy4wNzcgMCAxLjMyLjQ1OCAyLjQyNiAxLjM3MiAzLjMyMS45MTUuODk1IDIuMTE4IDEuMzQyIDMuNjA5IDEuMzQyIDEuNDExIDAgMi41NTQtLjQyNiAzLjQzLTEuMjc5Ljg3NC0uODUgMS4zMTEtMS45MTIgMS4zMTEtMy4xODEgMC0xLjI1LS40MzctMi4zMTUtMS4zMTItMy4xOTQtLjg3NS0uODgtMi4wMTgtMS4zMi0zLjQzLTEuMzItMS4zMzIuMDE5LTIuNDk1LjQzLTMuNDg4IDEuMjM0ek0xMjcgMTFoMy45NjZ2Ni41ODhoLjA2Yy40MzctLjU3OCAxLjAxOC0xLjAyNSAxLjc0NS0xLjM0MmE4LjYxMSA4LjYxMSAwIDAgMSAyLjI1MS0uNjM3Yy4xOTktLjAxOC4zODctLjAzMS41NjctLjA0LjE3OC0uMDEuMzU4LS4wMTQuNTM2LS4wMTQgMi40MjYgMCA0LjQxNC44MDUgNS45NjUgMi40MTMgMS41NSAxLjYwOSAyLjMyNiAzLjQ3IDIuMzI2IDUuNTg0IDAgLjMwOC0uMDIuNjI5LS4wNi45NjNhNS43MSA1LjcxIDAgMCAxLS4yMDkuOTkgOC41NDcgOC41NDcgMCAwIDEtLjcxNiAxLjg5OCA3LjMyMiA3LjMyMiAwIDAgMS0xLjEzMiAxLjYyNiA3LjEzMyA3LjEzMyAwIDAgMS0yLjcxNCAxLjg1NyA5IDkgMCAwIDEtMy4zNC42MzhjLTEuMTM0IDAtMi4xODItLjE5Ni0zLjE0Ny0uNTg0LS45NjUtLjM4OC0xLjc2NC0xLjAyNS0yLjQtMS45MTFsLS4wNi0uMDI3djIuMDMzSDEyN1YxMXpNMTU5LjY1NSAyMy40OTljMC0xLjI0Ny0uNDQzLTIuMy0xLjMyOC0zLjE2LS44ODUtLjg1OC0yLjAzMy0xLjI3OC0zLjQ0NC0xLjI2LTEuNDUyLS4wMTgtMi42NC40MTYtMy41NjQgMS4zMDItLjkyNC44ODYtMS4zODYgMS45ODgtMS4zODYgMy4zMDcgMCAxLjIzLjQ4MSAyLjI2NCAxLjQ0NiAzLjEwNC45NjQuODQgMi4xMTIgMS4yNTMgMy40NDQgMS4yMzQgMS40MzIuMDE5IDIuNTk1LS40MDcgMy40OS0xLjI3NC44OTQtLjg2OCAxLjM0Mi0xLjk0MyAxLjM0Mi0zLjIyNnYtLjAyN3ptMy43NTcgNy41MzZoLTMuNjM4di0yLjAzM2gtLjA2Yy0uNDk3LjY1LTEuMTU0IDEuMTg0LTEuOTY5IDEuNmE4LjY1NiA4LjY1NiAwIDAgMS0yLjUzNC44NGwtLjU1MS4wNTRjLS4xOS4wMTgtLjM3NC4wMjctLjU1Mi4wMjctMS4yNzMgMC0yLjQyNy0uMjIyLTMuNDYtLjY2NGE3LjU1NiA3LjU1NiAwIDAgMS0yLjYyNC0xLjgzIDcuODA1IDcuODA1IDAgMCAxLTEuNTItMi40OTQgOC4zMTIgOC4zMTIgMCAwIDEtLjUzOC0yLjk4M2MwLTEuMDQ4LjE2NC0yLjAxNC40OTItMi45LjMyOS0uODg1Ljg3LTEuNzE3IDEuNjI1LTIuNDk0LjgzNi0uODg2IDEuNzY0LTEuNTQxIDIuNzg5LTEuOTY2IDEuMDI0LS40MjQgMi4xNDEtLjYzNyAzLjM1NS0uNjM3IDEuMTMzIDAgMi4xNzcuMjIyIDMuMTMuNjY0YTYuNDQgNi40NCAwIDAgMSAyLjQxNyAxLjkzOXYtMi4xNDJoMy42Mzh2MTUuMDE5ek0xNjYuMzY0IDMxLjAzNWgzLjk2NlYxMWgtMy45NjZ6TTE4Ni4wNDYgMjEuOTI2Yy0uMzE5LS44ODYtLjg5NS0xLjU4Mi0xLjczLTIuMDg3YTUuMjQ3IDUuMjQ3IDAgMCAwLTIuNzczLS43NmgtLjI0YTUuNjk1IDUuNjk1IDAgMCAwLTIuNjgzLjg0N2MtLjgzNS41MS0xLjM5MSAxLjE3Ni0xLjY3IDJoOS4wOTZ6bS05LjAzNiAzLjJjLjI5OC44ODUuODUgMS41OSAxLjY1NSAyLjExM2E0Ljg0MiA0Ljg0MiAwIDAgMCAyLjY5OS43ODdjLjc1NSAwIDEuNDY1LS4xMTggMi4xMzEtLjM1Mi42NjYtLjIzNiAxLjE4OS0uNTUyIDEuNTY3LS45NWw0LjM4NC0uMDI3Yy0uNDk4IDEuMzU2LTEuNTA2IDIuNS0zLjAyNyAzLjQzLTEuNTIxLjkzLTMuMTU3IDEuMzk2LTQuOTA2IDEuMzk2LTIuNDA2IDAtNC40NTgtLjc2My02LjE1OC0yLjI5LTEuNy0xLjUyNy0yLjU1LTMuMzg1LTIuNTUtNS41NzIgMC0yLjIyMy44NDUtNC4xMyAyLjUzNS01LjcyIDEuNjktMS41OSAzLjc2Ny0yLjM4NiA2LjIzMi0yLjM4NiAyLjM2NiAwIDQuMzcuNzg5IDYuMDEgMi4zNjYgMS42NCAxLjU3NiAyLjQ2IDMuNDEgMi40NiA1LjUgMCAuMjM1LS4wMTUuNDY1LS4wNDUuNjktLjAzLjIyNS0uMDY1LjQ0Ni0uMTA1LjY2Mi0uMDIuMDczLS4wMzUuMTM2LS4wNDQuMTlhLjg4OC44ODggMCAwIDAtLjAxNS4xNjJIMTc3LjAxek0xOTIuNjA3IDE2LjAxNmgzLjY2OFYxNy40aC4wNmMuNDU2LS41NiAxLjA1OC0uOTk0IDEuODA0LTEuMzAyYTcuMzk1IDcuMzk1IDAgMCAxIDIuMzQtLjU0MmguNTk3Yy4wNzkgMCAuMTYuMDEuMjM5LjAyN2E2LjkyNCA2LjkyNCAwIDAgMSAyLjMxLjU3Yy43NDcuMzI1IDEuMzg4Ljc1IDEuOTI0IDEuMjczbC4yMjQuMjA0Yy4wNy4wNjMuMTM0LjE0LjE5NC4yMy42MzUuODE0IDEuMDE0IDEuNjgyIDEuMTMzIDIuNjAzLjEyLjkyMi4xOCAxLjg2Mi4xOCAyLjgydjcuNzUzaC0zLjk2N3YtNy43ODFjMC0uMjUzLS4wMS0uNTA1LS4wMy0uNzU5YTcuMjYgNy4yNiAwIDAgMC0uMjEtMS4xNTJjLS4wOTktLjM3LS4yNDgtLjcwOS0uNDQ2LTEuMDE3YTIuNzUzIDIuNzUzIDAgMCAwLTEuMDYtLjg2OCAzLjgyNyAzLjgyNyAwIDAgMC0xLjM4NS0uMzc5aC0uMzczYy0uMDcgMC0uMTQ0LjAxLS4yMjQuMDI3YTMuOTA0IDMuOTA0IDAgMCAwLTEuMzQyLjQyMSAyLjYzIDIuNjMgMCAwIDAtMS4wMTQuODhjLS4xOTguMjktLjM0OC42MjktLjQ0NyAxLjAxOC0uMS4zODgtLjE2Ljc4MS0uMTggMS4xNzktLjAyLjIzNS0uMDI5LjQ3LS4wMjkuNzA1djcuNzI2aC0zLjk2NlYxNi4wMTZ6TTIyMy40NzIgMjMuNDk5YzAtMS4yNDctLjQ0My0yLjMtMS4zMjctMy4xNi0uODg1LS44NTgtMi4wMzQtMS4yNzgtMy40NDQtMS4yNi0xLjQ1My0uMDE4LTIuNjQuNDE2LTMuNTY0IDEuMzAyLS45MjQuODg2LTEuMzg4IDEuOTg4LTEuMzg4IDMuMzA3IDAgMS4yMy40ODMgMi4yNjQgMS40NDcgMy4xMDQuOTY0Ljg0IDIuMTEzIDEuMjUzIDMuNDQ1IDEuMjM0IDEuNDMxLjAxOSAyLjU5NC0uNDA3IDMuNDg5LTEuMjc0Ljg5NC0uODY4IDEuMzQyLTEuOTQzIDEuMzQyLTMuMjI2di0uMDI3em0zLjc1OCA3LjUzNmgtMy42NHYtMi4wMzNoLS4wNThjLS40OTguNjUtMS4xNTQgMS4xODQtMS45NjkgMS42YTguNjY2IDguNjY2IDAgMCAxLTIuNTM1Ljg0bC0uNTUxLjA1NGMtLjE5LjAxOC0uMzczLjAyNy0uNTUyLjAyNy0xLjI3MiAwLTIuNDI2LS4yMjItMy40Ni0uNjY0YTcuNTQ4IDcuNTQ4IDAgMCAxLTIuNjIzLTEuODMgNy43OTYgNy43OTYgMCAwIDEtMS41MjEtMi40OTQgOC4zMTIgOC4zMTIgMCAwIDEtLjUzOC0yLjk4M2MwLTEuMDQ4LjE2NS0yLjAxNC40OTItMi45LjMzLS44ODUuODctMS43MTcgMS42MjYtMi40OTQuODM1LS44ODYgMS43NjQtMS41NDEgMi43ODgtMS45NjYgMS4wMjQtLjQyNCAyLjE0Mi0uNjM3IDMuMzU1LS42MzcgMS4xMzMgMCAyLjE3Ny4yMjIgMy4xMzEuNjY0YTYuNDQgNi40NCAwIDAgMSAyLjQxNiAxLjkzOXYtMi4xNDJoMy42Mzl2MTUuMDE5eiIvPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+Cg==",width:0,height:0}}}}},b=E,O=(n("9bb6"),n("24e8")),_=n("f09f"),k=n("d847"),Y=n("2c91"),Q=n("9c40"),U=n("05c0"),$=n("7f67"),F=n("eebe"),R=n.n(F),q=Object(l["a"])(b,L,j,!1,null,"52033c82",null),B=q.exports;R()(q,"components",{QDialog:O["a"],QCard:_["a"],QBar:k["a"],QSpace:Y["a"],QBtn:Q["a"],QTooltip:U["a"]}),R()(q,"directives",{ClosePopup:$["a"]});var P={components:{LogTerminal:B,Dot:g},data:function(){return{devices:[],currentUUID:"",loading:!1,maximizedToggle:!0,sshExpose:!1,selected:null,history:this.$t("notloaded"),dialog:!1,currLogs:null,appEnvVars:[],appConfigVars:[],deviceLoadingState:{},pagination:{rowsPerPage:20},columns:[{name:"device_name",label:this.$t("name"),align:"left",field:function(e){return e.device_name},format:function(e){return"".concat(e)},sortable:!0},{name:"is_online",label:this.$t("online"),align:"left",field:function(e){return[e.is_online,e.is_connected_to_vpn]},format:function(e){return"".concat(e)},sortable:!0},{name:"ip_address",label:this.$t("ip"),align:"left",field:function(e){return e.ip_address},format:function(e){return"".concat(e)},sortable:!0},{name:"mac_address",label:this.$t("mac_address"),align:"left",field:function(e){return e.mac_address},format:function(e){return"".concat(e)},sortable:!0},{name:"note",label:this.$t("note"),align:"left",field:function(e){return e.note},format:function(e){return"".concat(e)},sortable:!0},{name:"status",label:this.$t("overall"),align:"left",field:function(e){return e.overall_status+" "+(null==e.overall_progress?"":e.overall_progress)},format:function(e){return"".concat(e)},sortable:!0},{name:"uuid",label:this.$t("uuid"),align:"left",field:function(e){return e.uuid},format:function(e){return"".concat(e)},sortable:!0},{name:"last_connectivity_event",label:this.$t("last_connectivity_event"),align:"left",field:function(e){return e.last_connectivity_event},format:function(e){return"".concat(new Date(e).toLocaleString())},sortable:!0},{name:"created_at",label:this.$t("created_at"),align:"left",field:function(e){return e.created_at},format:function(e){return"".concat(new Date(e).toLocaleString())},sortable:!0}]}},mounted:function(){this.loadApplicationDetails(),setInterval(this.loadApplicationDetails,5e3),this.$store.commit("main/selectApplication",this.$route.params.id)},methods:{saveNote:function(e){var t=this;return s()(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.next=3,t.$store.state.main.sdk.models.device.note(e.row.uuid,e.row.note);case 3:t.loading=!1;case 4:case"end":return n.stop()}}),n)})))()},showLog:function(e){this.dialog=!0,this.currentUUID=e},hideLog:function(){this.dialog=!1},reboot:function(e){var t=this;return s()(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.next=3,t.$store.state.main.sdk.models.device.reboot(e.row.uuid);case 3:t.loading=!1;case 4:case"end":return n.stop()}}),n)})))()},saveDeviceName:function(e){var t=this;return s()(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.next=3,t.$store.state.main.sdk.models.device.rename(e.row.uuid,e.row.device_name);case 3:t.loading=!1;case 4:case"end":return n.stop()}}),n)})))()},restart:function(e){var t=this;return s()(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.next=3,t.$store.state.main.sdk.models.device.restartApplication(e.row.uuid);case 3:t.loading=!1;case 4:case"end":return n.stop()}}),n)})))()},loadApplicationDetails:function(){var e=this;return s()(regeneratorRuntime.mark((function t(){var n,i,o,r,s,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.state.main.sdk.models.device.getAllByApplication(e.$route.params.id);case 2:if(n=t.sent,console.log(n),!e.$store.state.main.tunnelerUrl){t.next=9;break}return t.next=7,e.$tunnelerClient.getConnectionsForApp(e.$route.params.id);case 7:for(i=t.sent,o=0;o<n.length;o++)for(r=n[o],void 0===r.sshExposed&&(r.sshExposed=!1),void 0===r.exposed&&(r.exposed=!1),void 0===r.exposedSSL&&(r.exposedSSL=!1),s=0;s<i.length;s++)u=i[s],r.uuid===u.deviceUUID&&("SSHTRAEFIK"===u.forwarderType?(r.sshExposed=!0,r.sshDetails=u):"TRAEFIK"===u.forwarderType?(r.exposed=!0,r.exposedDetails=u):"SSLTRAEFIK"===u.forwarderType&&(r.exposedSSL=!0,r.exposedDetails=u,r.exposedDetails.ssl=!0),r.tunneler?r.tunneler.push(u):r.tunneler=[u]);case 9:e.devices=n;case 10:case"end":return t.stop()}}),t)})))()},openDomain:function(e){return s()(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.ssl?"https://":"http://",window.open(n+e.domainName,"_blank");case 2:case"end":return t.stop()}}),t)})))()},refresh:function(e){var t=this;return s()(regeneratorRuntime.mark((function n(){var i,o,r,s,u,a,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.next=3,t.$store.state.main.sdk.models.device.get(e.row.uuid);case 3:i=n.sent,o=null,r=0;case 6:if(!(r<t.devices.length)){n.next=14;break}if(s=t.devices[r],s.uuid!==e.row.uuid){n.next=11;break}return o=r,n.abrupt("break",14);case 11:r++,n.next=6;break;case 14:if(!t.$store.state.main.tunnelerUrl){n.next=23;break}return n.next=17,t.$tunnelerClient.getConnectionsForDevice(e.row.uuid);case 17:for(u=n.sent,i.tunneler=u,i.exposedSSL=!1,i.exposed=!1,i.sshExposed=!1,a=0;a<i.tunneler.length;a++)c=i.tunneler[a],console.log(c),"SSHTRAEFIK"===c.forwarderType?(i.sshExposed=!0,i.sshDetails=c,i.exposedDetails.ssl=!1):"TRAEFIK"===c.forwarderType?(i.exposed=!0,i.exposedDetails=c,i.exposedDetails.ssl=!1):"SSLTRAEFIK"===c.forwarderType&&(i.exposedSSL=!0,i.exposedDetails=c,i.exposedDetails.ssl=!0);case 23:t.devices.splice(o,1,i),t.loading=!1;case 25:case"end":return n.stop()}}),n)})))()},exposeSSL:function(e){var t=this;return s()(regeneratorRuntime.mark((function n(){var i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.loading=!0,t.deviceLoadingState[e.row.uuid]=!0,i=e.row.uuid,e.row.exposedSSL){n.next=8;break}return n.next=6,t.$tunnelerClient.deleteConnections(i,void 0,void 0,"SSLTRAEFIK");case 6:n.next=15;break;case 8:return o=i.substr(0,10)+".s1.skryba.online",n.next=11,t.$tunnelerClient.openSSLDomainFor(i,o,80,t.$route.params.id);case 11:return e.row.exposedDetails={domainName:"https://"+o},n.next=14,new Promise((function(e){return setTimeout(e,500)}));case 14:window.open(e.row.exposedDetails.domainName,"_blank");case 15:t.deviceLoadingState[e.row.uuid]=!1,t.loading=!1;case 17:case"end":return n.stop()}}),n)})))()},expose:function(e){var t=this;return s()(regeneratorRuntime.mark((function n(){var i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.loading=!0,t.deviceLoadingState[e.row.uuid]=!0,i=e.row.uuid,e.row.exposed){n.next=8;break}return n.next=6,t.$tunnelerClient.deleteConnections(i,void 0,void 0,"TRAEFIK");case 6:n.next=15;break;case 8:return n.next=10,t.$tunnelerClient.openDomainFor(i,i,80,!0,t.$route.params.id);case 10:return o=n.sent,e.row.exposedDetails={domainName:"http://"+i+"."+o.ip+".xip.io"},n.next=14,new Promise((function(e){return setTimeout(e,500)}));case 14:window.open(e.row.exposedDetails.domainName,"_blank");case 15:t.deviceLoadingState[e.row.uuid]=!1,t.loading=!1;case 17:case"end":return n.stop()}}),n)})))()},ssh:function(e){var t=this;return s()(regeneratorRuntime.mark((function n(){var i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.loading=!0,t.deviceLoadingState[e.row.uuid]=!0,i=e.row.uuid,e.row.sshExposed){n.next=8;break}return n.next=6,t.$tunnelerClient.deleteConnections(i,void 0,void 0,"SSHTRAEFIK");case 6:n.next=15;break;case 8:return n.next=10,t.$tunnelerClient.openSSHTraefik(i,"ssh."+i,22222,!0,t.$route.params.id);case 10:return o=n.sent,e.row.sshDetails={domainName:"http://ssh."+i+"."+o.ip+".xip.io"},n.next=14,new Promise((function(e){return setTimeout(e,500)}));case 14:window.open(e.row.sshDetails.domainName,"_blank");case 15:t.loading=!1,t.deviceLoadingState[e.row.uuid]=!1;case 17:case"end":return n.stop()}}),n)})))()}}},H=P,Z=n("9989"),K=n("eaac"),J=n("1c1c"),W=n("66e5"),G=n("4074"),V=n("0170"),X=n("42a1"),ee=n("27f9"),te=n("eb85"),ne=n("a370"),ie=n("9564"),oe=Object(l["a"])(H,i,o,!1,null,null,null);t["default"]=oe.exports;R()(oe,"components",{QPage:Z["a"],QTable:K["a"],QCard:_["a"],QList:J["a"],QItem:W["a"],QItemSection:G["a"],QItemLabel:V["a"],QPopupEdit:X["a"],QInput:ee["a"],QSeparator:te["a"],QCardSection:ne["a"],QBtn:Q["a"],QToggle:ie["a"]})},"6ecd":function(e,t,n){"use strict";n("f6b8")},"9bb6":function(e,t,n){"use strict";n("af75")},af75:function(e,t,n){},d0db:function(e,t,n){"use strict";n("d604")},d604:function(e,t,n){},f6b8:function(e,t,n){}}]);